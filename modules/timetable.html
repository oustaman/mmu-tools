<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Timetable - Interactive View</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-6">
    <div class="max-w-7xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-900 mb-6">Academic Timetable</h1>
        
        <!-- View Mode Controls -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">View Mode</h2>
            
            <!-- View Mode Selector -->
            <div class="mb-6">
                <div class="flex flex-wrap gap-2">
                    <button onclick="setViewMode('staff')" id="mode-staff" class="px-6 py-3 rounded-md bg-blue-600 text-white hover:bg-blue-700 transition font-medium">Staff View</button>
                    <button onclick="setViewMode('staff-year')" id="mode-staff-year" class="px-6 py-3 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition font-medium">Staff Year View</button>
                    <button onclick="setViewMode('student')" id="mode-student" class="px-6 py-3 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition font-medium">Student View</button>
                    <button onclick="setViewMode('all')" id="mode-all" class="px-6 py-3 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition font-medium">All Classes</button>
                </div>
            </div>

            <!-- Staff View Controls -->
            <div id="staff-controls" class="mb-4">
                <h3 class="text-sm font-medium text-gray-700 mb-2">Select Staff Member:</h3>
                <div class="flex flex-wrap gap-2">
                    <button onclick="selectStaff('AH')" id="staff-AH" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">AH</button>
                    <button onclick="selectStaff('ES')" id="staff-ES" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">ES</button>
                    <button onclick="selectStaff('EL')" id="staff-EL" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">EL</button>
                    <button onclick="selectStaff('FJ')" id="staff-FJ" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">FJ</button>
                    <button onclick="selectStaff('GW')" id="staff-GW" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">GW</button>
                    <button onclick="selectStaff('KF')" id="staff-KF" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">KF</button>
                    <button onclick="selectStaff('MP')" id="staff-MP" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">MP</button>
                    <button onclick="selectStaff('MS')" id="staff-MS" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">MS</button>
                    <button onclick="selectStaff('MO')" id="staff-MO" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">MO</button>
                    <button onclick="selectStaff('SB')" id="staff-SB" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">SB</button>
                </div>
            </div>

            <!-- Year Filter Controls (for Staff Year View) -->
            <div id="year-controls" class="mb-4" style="display: none;">
                <h3 class="text-sm font-medium text-gray-700 mb-2">Filter by Year Level:</h3>
                <div class="flex flex-wrap gap-2">
                    <button onclick="selectYear('ALL')" id="year-ALL" class="px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 transition">All Years</button>
                    <button onclick="selectYear('L4')" id="year-L4" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">L4</button>
                    <button onclick="selectYear('L5')" id="year-L5" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">L5</button>
                    <button onclick="selectYear('L6')" id="year-L6" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">L6</button>
                    <button onclick="selectYear('L7')" id="year-L7" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">L7</button>
                </div>
            </div>

            <!-- Student View Controls -->
            <div id="student-controls" style="display: none;">
                <h3 class="text-sm font-medium text-gray-700 mb-2">Select Year Level:</h3>
                <div class="flex flex-wrap gap-2">
                    <button onclick="selectStudentYear('L4')" id="student-L4" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">Level 4</button>
                    <button onclick="selectStudentYear('L5')" id="student-L5" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">Level 5</button>
                    <button onclick="selectStudentYear('L6')" id="student-L6" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">Level 6</button>
                    <button onclick="selectStudentYear('L7')" id="student-L7" class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition">Level 7 (MA LIM)</button>
                </div>
            </div>

            <!-- Current View Display -->
            <div id="current-view-display" class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md">
                <p class="text-sm text-blue-900 font-medium">üìä Currently viewing: <span id="current-view-text">All Classes</span></p>
            </div>
        </div>

        <!-- Timetable Grid -->
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b">Time</th>
                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b">Monday</th>
                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b">Tuesday</th>
                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b">Wednesday</th>
                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b">Thursday</th>
                            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b">Friday</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200" id="timetable-body">
                        <!-- 10am-12pm -->
                        <tr>
                            <td class="px-4 py-3 text-sm font-medium text-gray-600 align-top">10:00-12:00</td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot mb-3" data-staff="AH" data-level="L4">
                                    <div class="text-sm font-semibold text-blue-900">L4 Digital Entrepreneurship</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: AH | 100 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Repeated Lecture (split into 2 groups of ~50)</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: GE or GM (Standard, ~50 capacity)</div>
                                </div>
                                <div class="class-slot" data-staff="KF" data-level="L7">
                                    <div class="text-sm font-semibold text-rose-900">L7 Digital Rights</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: KF | 15 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Round Table Seminar</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: GM 120 (Computer Lab - for editing software)</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="MS" data-level="L4">
                                    <div class="text-sm font-semibold text-blue-900">L4 DAC</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: MS | 100 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Lecture + Computer Workshop</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Large Lecture Theatre + Computer Lab</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot mb-3" data-staff="EL,KF" data-level="L6" data-duration="3">
                                    <div class="text-sm font-semibold text-purple-900">L6 DMP (3 hours)</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: EL, KF | 54 students</div>
                                    <div class="text-xs text-amber-600 mt-1">10:00-13:00</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Supervised Project Workshop</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Computer Lab (suggested)</div>
                                </div>
                                <div class="class-slot mb-3" data-staff="ES" data-level="L5">
                                    <div class="text-sm font-semibold text-green-900">L5 Uses of Social Networking</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: ES | 60 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Interactive Lecture / Seminar</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: GM338 or similar Standard Classroom</div>
                                </div>
                                <div class="class-slot mb-3" data-staff="FJ" data-level="L7">
                                    <div class="text-sm font-semibold text-rose-900">L7 Assessing Information Seeking Behaviour</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: FJ | 15 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Round Table Seminar</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Small Seminar Room / Boardroom (suggested)</div>
                                    <div class="text-xs text-emerald-600 mt-1">‚ÑπÔ∏è Same day as Research Methods for part-time students</div>
                                </div>
                                <div class="class-slot" data-staff="SB" data-level="L4">
                                    <div class="text-sm font-semibold text-blue-900">L4 Web Page Development</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: SB | 100 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Computer Workshop (Group 1 with assistants)</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Computer Lab (suggested)</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top">
                            </td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="ES" data-level="L5">
                                    <div class="text-sm font-semibold text-green-900">L5 Digital Rights: Ethics</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: ES | 63 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Interactive Lecture / Seminar</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: GM338 or similar Standard Classroom</div>
                                </div>
                            </td>
                        </tr>
                        
                        <!-- 11am-2pm (L5 Website Dev 3 hours) -->
                        <tr>
                            <td class="px-4 py-3 text-sm font-medium text-gray-600 align-top">11:00-14:00</td>
                            <td class="px-4 py-3 align-top"></td>
                            <td class="px-4 py-3 align-top"></td>
                            <td class="px-4 py-3 align-top"></td>
                            <td class="px-4 py-3 align-top"></td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="MO,SB" data-level="L5" data-duration="3">
                                    <div class="text-sm font-semibold text-green-900">L5 Website Development - Design (3 hours)</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: MO, SB | 60 students</div>
                                    <div class="text-xs text-amber-600 mt-1">11:00-14:00</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Lecture + Computer Workshop</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Standard Classroom + Computer Lab</div>
                                </div>
                            </td>
                        </tr>

                        <!-- 12pm-2pm -->
                        <tr>
                            <td class="px-4 py-3 text-sm font-medium text-gray-600 align-top">12:00-14:00</td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="AH" data-level="L5">
                                    <div class="text-sm font-semibold text-green-900">L5 Digital PM</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: AH | 60 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Lecture + Interactive Workshop</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: GE or GM (Standard, ~50 capacity)</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="MP" data-level="L4">
                                    <div class="text-sm font-semibold text-blue-900">L4 Digital Society, Culture and Communications</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: MP | 100 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Traditional Lecture</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Large Lecture Theatre (suggested)</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top"></td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="MO" data-level="L6">
                                    <div class="text-sm font-semibold text-purple-900">L6 UXCI</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: MO | 54 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Combined Lecture & Workshop</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Computer Lab (suggested)</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top">
                            </td>
                        </tr>

                        <!-- 1pm-3pm -->
                        <tr>
                            <td class="px-4 py-3 text-sm font-medium text-gray-600 align-top">13:00-15:00</td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="GW" data-level="L7">
                                    <div class="text-sm font-semibold text-rose-900">L7 The Information Organisation</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: GW | 15 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Round Table Seminar</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: GM 228 (25 capacity)</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top"></td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="GW" data-level="L7">
                                    <div class="text-sm font-semibold text-rose-900">L7 Research Methods</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: GW | 15 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Round Table Seminar</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Small Seminar Room / Boardroom (suggested)</div>
                                    <div class="text-xs text-emerald-600 mt-1">‚ÑπÔ∏è Same day as AISB for part-time students; lunch break 12-1pm</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top"></td>
                            <td class="px-4 py-3 align-top"></td>
                        </tr>

                        <!-- 2pm-4pm -->
                        <tr>
                            <td class="px-4 py-3 text-sm font-medium text-gray-600 align-top">14:00-16:00</td>
                            <td class="px-4 py-3 align-top">
                            </td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="MP,MS" data-level="L5">
                                    <div class="text-sm font-semibold text-green-900">L5 CAP</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: MP, MS | 60 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Lecture + Computer Workshop</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Standard Classroom + Computer Lab</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot mb-3" data-staff="KF" data-level="L6">
                                    <div class="text-sm font-semibold text-purple-900">L6 DMP Workshop</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: KF | 54 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Focused Practical Workshop</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: GM119 (Computer Lab)</div>
                                    <div class="text-xs text-emerald-600 mt-1">‚ÑπÔ∏è Scheduled same day as main DMP session for better attendance</div>
                                </div>
                                <div class="class-slot" data-staff="MO,SB" data-level="L4">
                                    <div class="text-sm font-semibold text-blue-900">L4 Web Page Development</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: MO, SB | 100 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Computer Workshop (Groups 2 & 3 with assistants)</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Computer Lab (suggested)</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top">
                                <div class="class-slot" data-staff="MO" data-level="L4">
                                    <div class="text-sm font-semibold text-blue-900">L4 Digital Media Technologies and Society</div>
                                    <div class="text-xs text-gray-600 mt-1">Staff: MO | 50 students</div>
                                    <div class="text-xs text-gray-500 mt-1">üìç Traditional Lecture</div>
                                    <div class="text-xs text-indigo-600 font-medium">Classroom: Standard Classroom (suggested)</div>
                                </div>
                            </td>
                            <td class="px-4 py-3 align-top">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Legend -->
        <div class="mt-6 bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">Color Legend</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 bg-blue-100 border border-blue-300 rounded"></div>
                    <span class="text-sm text-gray-700">Level 4</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 bg-green-100 border border-green-300 rounded"></div>
                    <span class="text-sm text-gray-700">Level 5</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 bg-purple-100 border border-purple-300 rounded"></div>
                    <span class="text-sm text-gray-700">Level 6</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 bg-rose-100 border border-rose-300 rounded"></div>
                    <span class="text-sm text-gray-700">Level 7</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentViewMode = 'staff';
        let selectedStaff = null;
        let selectedYear = 'ALL';
        let selectedStudentYear = null;

        function setViewMode(mode) {
            currentViewMode = mode;
            
            // Update mode button styles
            document.querySelectorAll('button[id^="mode-"]').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            document.getElementById('mode-' + mode).classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById('mode-' + mode).classList.add('bg-blue-600', 'text-white');
            
            // Show/hide appropriate controls
            document.getElementById('staff-controls').style.display = (mode === 'staff' || mode === 'staff-year') ? 'block' : 'none';
            document.getElementById('year-controls').style.display = (mode === 'staff-year' && selectedStaff) ? 'block' : 'none';
            document.getElementById('student-controls').style.display = (mode === 'student') ? 'block' : 'none';
            
            // Reset selections based on mode
            if (mode === 'staff') {
                selectedStaff = null;
                selectedYear = 'ALL';
                resetStaffButtons();
                updateView();
            } else if (mode === 'staff-year') {
                selectedStaff = null;
                selectedYear = 'ALL';
                resetStaffButtons();
                resetYearButtons();
                updateView();
            } else if (mode === 'student') {
                selectedStudentYear = null;
                resetStudentButtons();
                updateView();
            } else if (mode === 'all') {
                showAllClasses();
            }
        }

        function selectStaff(staff) {
            selectedStaff = staff;
            
            // Update staff button styles
            resetStaffButtons();
            document.getElementById('staff-' + staff).classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById('staff-' + staff).classList.add('bg-blue-600', 'text-white');
            
            // Show year controls if in staff-year mode
            if (currentViewMode === 'staff-year') {
                document.getElementById('year-controls').style.display = 'block';
            }
            
            updateView();
        }

        function selectYear(year) {
            selectedYear = year;
            
            // Update year button styles
            resetYearButtons();
            document.getElementById('year-' + year).classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById('year-' + year).classList.add('bg-blue-600', 'text-white');
            
            updateView();
        }

        function selectStudentYear(year) {
            selectedStudentYear = year;
            
            // Update student year button styles
            resetStudentButtons();
            document.getElementById('student-' + year).classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById('student-' + year).classList.add('bg-blue-600', 'text-white');
            
            updateView();
        }

        function resetStaffButtons() {
            document.querySelectorAll('button[id^="staff-"]').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
        }

        function resetYearButtons() {
            document.querySelectorAll('button[id^="year-"]').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            document.getElementById('year-ALL').classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById('year-ALL').classList.add('bg-blue-600', 'text-white');
        }

        function resetStudentButtons() {
            document.querySelectorAll('button[id^="student-"]').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
        }

        function updateView() {
            let viewText = '';
            
            if (currentViewMode === 'all') {
                showAllClasses();
                viewText = 'All Classes';
            } else if (currentViewMode === 'staff') {
                if (selectedStaff) {
                    filterByStaff(selectedStaff);
                    viewText = `Staff View: ${selectedStaff}'s Timetable`;
                } else {
                    showAllClasses();
                    viewText = 'Staff View (Select a staff member)';
                }
            } else if (currentViewMode === 'staff-year') {
                if (selectedStaff) {
                    if (selectedYear === 'ALL') {
                        filterByStaff(selectedStaff);
                        viewText = `Staff Year View: ${selectedStaff} - All Years`;
                    } else {
                        filterByStaffAndYear(selectedStaff, selectedYear);
                        viewText = `Staff Year View: ${selectedStaff} - ${selectedYear}`;
                    }
                } else {
                    showAllClasses();
                    viewText = 'Staff Year View (Select a staff member)';
                }
            } else if (currentViewMode === 'student') {
                if (selectedStudentYear) {
                    filterByStudentYear(selectedStudentYear);
                    viewText = `Student View: ${selectedStudentYear} Timetable`;
                } else {
                    showAllClasses();
                    viewText = 'Student View (Select a year level)';
                }
            }
            
            document.getElementById('current-view-text').textContent = viewText;
        }

        function showAllClasses() {
            document.querySelectorAll('.class-slot').forEach(slot => {
                slot.style.opacity = '1';
                slot.style.transform = 'scale(1)';
                slot.parentElement.parentElement.style.display = '';
            });
            document.querySelectorAll('#timetable-body tr').forEach(row => {
                row.style.display = '';
            });
        }

        function filterByStaff(staff) {
            document.querySelectorAll('.class-slot').forEach(slot => {
                const staffList = slot.getAttribute('data-staff').split(',');
                if (staffList.includes(staff)) {
                    slot.style.opacity = '1';
                    slot.style.transform = 'scale(1)';
                } else {
                    slot.style.opacity = '0.15';
                    slot.style.transform = 'scale(0.95)';
                }
            });
            hideEmptyRows();
        }

        function filterByStaffAndYear(staff, year) {
            document.querySelectorAll('.class-slot').forEach(slot => {
                const staffList = slot.getAttribute('data-staff').split(',');
                const level = slot.getAttribute('data-level');
                
                if (staffList.includes(staff) && level === year) {
                    slot.style.opacity = '1';
                    slot.style.transform = 'scale(1)';
                } else {
                    slot.style.opacity = '0.15';
                    slot.style.transform = 'scale(0.95)';
                }
            });
            hideEmptyRows();
        }

        function filterByStudentYear(year) {
            document.querySelectorAll('.class-slot').forEach(slot => {
                const level = slot.getAttribute('data-level');
                if (level === year) {
                    slot.style.opacity = '1';
                    slot.style.transform = 'scale(1)';
                } else {
                    slot.style.opacity = '0.15';
                    slot.style.transform = 'scale(0.95)';
                }
            });
            hideEmptyRows();
        }

        function hideEmptyRows() {
            document.querySelectorAll('#timetable-body tr').forEach(row => {
                const visibleSlots = Array.from(row.querySelectorAll('.class-slot')).filter(slot => 
                    slot.style.opacity !== '0.15'
                );
                if (visibleSlots.length === 0) {
                    row.style.display = 'none';
                } else {
                    row.style.display = '';
                }
            });
        }

        // Add transition effects and colors
        document.querySelectorAll('.class-slot').forEach(slot => {
            slot.style.transition = 'all 0.3s ease';
            
            // Set colors based on level
            const level = slot.getAttribute('data-level');
            if (level === 'L4') {
                slot.classList.add('bg-blue-50', 'border', 'border-blue-200', 'rounded-lg', 'p-3');
            } else if (level === 'L5') {
                slot.classList.add('bg-green-50', 'border', 'border-green-200', 'rounded-lg', 'p-3');
            } else if (level === 'L6') {
                slot.classList.add('bg-purple-50', 'border', 'border-purple-200', 'rounded-lg', 'p-3');
            } else if (level === 'L7') {
                slot.classList.add('bg-rose-50', 'border', 'border-rose-200', 'rounded-lg', 'p-3');
            }
        });

        // Initialize view
        updateView();
    </script>
</body>
</html>
