<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUS Score Calculator - UXCI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --border-color: #e5e7eb;
            --accent-color: #8b5cf6;
            --font-size: 1;
        }
        .dark-mode {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --text-primary: #f9fafb;
            --text-secondary: #9ca3af;
            --border-color: #374151;
            --accent-color: #a78bfa;
        }
        html { font-size: calc(var(--font-size) * 16px); }
        body { background-color: var(--bg-primary); color: var(--text-primary); }
        .scale-option { transition: all 0.2s; cursor: pointer; }
        .scale-option:hover { transform: scale(1.05); }
        .scale-option.selected { border-color: var(--accent-color); background-color: #faf5ff; font-weight: bold; }
        @media print { .no-print { display: none; } }
    </style>
</head>
<body class="min-h-screen">
    <header class="border-b p-4 no-print" style="border-color: var(--border-color);">
        <div class="max-w-7xl mx-auto flex justify-between items-center flex-wrap gap-4">
            <div>
                <h1 class="text-2xl font-bold">üìä SUS Score Calculator</h1>
                <p class="text-sm" style="color: var(--text-secondary);">System Usability Scale - Industry standard usability questionnaire</p>
            </div>
            <div class="flex gap-2">
                <button id="decreaseFont" class="px-3 py-2 rounded border" style="border-color: var(--border-color);">A-</button>
                <button id="increaseFont" class="px-3 py-2 rounded border" style="border-color: var(--border-color);">A+</button>
                <button id="darkModeToggle" class="px-4 py-2 rounded border" style="border-color: var(--border-color);"><span id="modeIcon">üåô</span></button>
                <button onclick="window.location.href='index.html'" class="px-4 py-2 rounded border" style="border-color: var(--border-color);">‚Üê Back</button>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-8">
        <!-- Info -->
        <div class="mb-8 p-6 rounded-lg border" style="border-color: var(--accent-color); background-color: #faf5ff;">
            <h2 class="text-xl font-bold mb-3">‚ÑπÔ∏è About SUS</h2>
            <p class="mb-3">The System Usability Scale (SUS) is a reliable, low-cost usability scale that can be used for global assessments of systems usability.</p>
            <ul class="text-sm space-y-1" style="color: var(--text-secondary);">
                <li>‚Ä¢ <strong>10 questions</strong> rated on a 5-point scale</li>
                <li>‚Ä¢ Scores range from <strong>0-100</strong></li>
                <li>‚Ä¢ Above 68 is considered above average</li>
                <li>‚Ä¢ Administer <strong>after</strong> users complete tasks</li>
            </ul>
        </div>

        <!-- Actions -->
        <div class="mb-8 flex gap-3 no-print">
            <button onclick="calculateScore()" class="px-6 py-3 rounded text-white font-bold" style="background-color: var(--accent-color);">Calculate Score</button>
            <button onclick="exportToPNG()" class="px-6 py-3 rounded border" style="border-color: var(--border-color);">üì• Export PNG</button>
            <button onclick="window.print()" class="px-6 py-3 rounded border" style="border-color: var(--border-color);">üñ®Ô∏è Print</button>
            <button onclick="resetForm()" class="px-6 py-3 rounded border text-red-600" style="border-color: var(--border-color);">Reset</button>
        </div>

        <!-- Participant Info -->
        <div class="mb-8 p-6 rounded-lg border" style="border-color: var(--border-color); background-color: var(--bg-secondary);">
            <h3 class="text-lg font-bold mb-4">Participant Information (Optional)</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="text" id="participantName" class="p-3 rounded border" style="border-color: var(--border-color);" placeholder="Participant ID or Name">
                <input type="text" id="testDate" class="p-3 rounded border" style="border-color: var(--border-color);" placeholder="Test Date" value="${new Date().toISOString().slice(0,10)}">
            </div>
        </div>

        <!-- SUS Questions -->
        <div id="questionnaire" class="space-y-6 mb-8">
            <!-- Questions will be generated by JavaScript -->
        </div>

        <!-- Results -->
        <div id="results" class="hidden p-8 rounded-lg border" style="border-color: var(--border-color); background-color: white;">
            <h2 class="text-3xl font-bold mb-6 text-center">SUS Score Results</h2>
            
            <div class="text-center mb-8">
                <div class="text-7xl font-bold mb-2" id="scoreDisplay" style="color: var(--accent-color);">--</div>
                <div class="text-xl" style="color: var(--text-secondary);">out of 100</div>
            </div>

            <div class="mb-8 p-6 rounded-lg" id="interpretation">
                <!-- Interpretation will be added by JavaScript -->
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="p-6 rounded-lg" style="background-color: var(--bg-secondary);">
                    <h3 class="font-bold mb-3">üìä Industry Benchmark</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between"><span>Average SUS score:</span><strong>68</strong></div>
                        <div class="flex justify-between"><span>Your score:</span><strong id="yourScore">--</strong></div>
                        <div class="flex justify-between"><span>Percentile:</span><strong id="percentile">--</strong></div>
                    </div>
                </div>

                <div class="p-6 rounded-lg" style="background-color: var(--bg-secondary);">
                    <h3 class="font-bold mb-3">üéØ Grade Scale</h3>
                    <div class="space-y-2 text-sm">
                        <div>A+ (84.1-100): <span style="color: #10b981;">Excellent</span></div>
                        <div>A (80.8-84.0): <span style="color: #22c55e;">Good</span></div>
                        <div>B (74-80.7): <span style="color: #84cc16;">Above Average</span></div>
                        <div>C (68-73.9): <span style="color: #eab308;">Average</span></div>
                        <div>D (51-67.9): <span style="color: #f97316;">Below Average</span></div>
                        <div>F (0-50.9): <span style="color: #ef4444;">Poor</span></div>
                    </div>
                </div>
            </div>

            <div class="p-6 rounded-lg" style="background-color: #fef3c7;">
                <h3 class="font-bold mb-3" style="color: #92400e;">üí° Next Steps</h3>
                <ul class="text-sm space-y-2" style="color: #92400e;">
                    <li>‚Ä¢ <strong>Low score (&lt;68)?</strong> Conduct usability testing to identify specific issues</li>
                    <li>‚Ä¢ <strong>High score (&gt;80)?</strong> Great! Document what works well</li>
                    <li>‚Ä¢ <strong>Test with 5+ users</strong> for reliable results</li>
                    <li>‚Ä¢ <strong>Compare scores</strong> before and after design changes</li>
                </ul>
            </div>
        </div>
    </main>

    <script>
        const questions = [
            { id: 1, text: "I think that I would like to use this system frequently", positive: true },
            { id: 2, text: "I found the system unnecessarily complex", positive: false },
            { id: 3, text: "I thought the system was easy to use", positive: true },
            { id: 4, text: "I think that I would need the support of a technical person to be able to use this system", positive: false },
            { id: 5, text: "I found the various functions in this system were well integrated", positive: true },
            { id: 6, text: "I thought there was too much inconsistency in this system", positive: false },
            { id: 7, text: "I would imagine that most people would learn to use this system very quickly", positive: true },
            { id: 8, text: "I found the system very cumbersome to use", positive: false },
            { id: 9, text: "I felt very confident using the system", positive: true },
            { id: 10, text: "I needed to learn a lot of things before I could get going with this system", positive: false }
        ];

        const responses = {};

        function renderQuestionnaire() {
            const container = document.getElementById('questionnaire');
            questions.forEach(q => {
                const div = document.createElement('div');
                div.className = 'p-6 rounded-lg border';
                div.style.borderColor = 'var(--border-color)';
                div.style.backgroundColor = 'var(--bg-secondary)';
                
                div.innerHTML = `
                    <div class="mb-4">
                        <span class="font-bold" style="color: var(--accent-color);">Q${q.id}</span>
                        <p class="mt-2">${q.text}</p>
                    </div>
                    <div class="flex justify-between gap-2">
                        ${[1,2,3,4,5].map(value => `
                            <div class="scale-option flex-1 p-3 text-center rounded border cursor-pointer" 
                                 style="border-color: var(--border-color);"
                                 onclick="selectResponse(${q.id}, ${value})">
                                <div class="font-bold">${value}</div>
                                <div class="text-xs mt-1" style="color: var(--text-secondary);">
                                    ${value === 1 ? 'Strongly<br>Disagree' : value === 5 ? 'Strongly<br>Agree' : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function selectResponse(questionId, value) {
            responses[questionId] = value;
            
            // Update UI
            const questionDiv = event.currentTarget.parentElement.parentElement;
            questionDiv.querySelectorAll('.scale-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        function calculateScore() {
            // Check all questions answered
            if (Object.keys(responses).length < 10) {
                alert('Please answer all 10 questions before calculating the score.');
                return;
            }

            let score = 0;
            questions.forEach(q => {
                const response = responses[q.id];
                if (q.positive) {
                    // Positive questions: subtract 1
                    score += (response - 1);
                } else {
                    // Negative questions: 5 minus response
                    score += (5 - response);
                }
            });

            // Multiply by 2.5 to get 0-100 scale
            const finalScore = score * 2.5;

            displayResults(finalScore);
        }

        function displayResults(score) {
            document.getElementById('scoreDisplay').textContent = score.toFixed(1);
            document.getElementById('yourScore').textContent = score.toFixed(1);

            // Calculate percentile (approximate)
            let percentile;
            if (score >= 84) percentile = '95th';
            else if (score >= 80) percentile = '90th';
            else if (score >= 74) percentile = '75th';
            else if (score >= 68) percentile = '50th';
            else if (score >= 51) percentile = '25th';
            else percentile = '10th';
            
            document.getElementById('percentile').textContent = percentile;

            // Interpretation
            let grade, interpretation, color, emoji;
            if (score >= 84.1) {
                grade = 'A+';
                interpretation = 'Excellent! Users find your system highly usable.';
                color = '#10b981';
                emoji = 'üéâ';
            } else if (score >= 80.8) {
                grade = 'A';
                interpretation = 'Good! Your system is above average in usability.';
                color = '#22c55e';
                emoji = '‚úÖ';
            } else if (score >= 74) {
                grade = 'B';
                interpretation = 'Above Average. Your system is doing well.';
                color = '#84cc16';
                emoji = 'üëç';
            } else if (score >= 68) {
                grade = 'C';
                interpretation = 'Average. There\'s room for improvement.';
                color = '#eab308';
                emoji = '‚ö†Ô∏è';
            } else if (score >= 51) {
                grade = 'D';
                interpretation = 'Below Average. Usability improvements needed.';
                color = '#f97316';
                emoji = '‚ö†Ô∏è';
            } else {
                grade = 'F';
                interpretation = 'Poor. Significant usability issues to address.';
                color = '#ef4444';
                emoji = '‚ùå';
            }

            document.getElementById('interpretation').innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-4">${emoji}</div>
                    <div class="text-4xl font-bold mb-2" style="color: ${color};">Grade: ${grade}</div>
                    <div class="text-lg" style="color: var(--text-secondary);">${interpretation}</div>
                </div>
            `;

            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function resetForm() {
            if (confirm('Reset all responses?')) {
                Object.keys(responses).forEach(key => delete responses[key]);
                document.querySelectorAll('.scale-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                document.getElementById('results').classList.add('hidden');
                document.getElementById('participantName').value = '';
            }
        }

        async function exportToPNG() {
            const results = document.getElementById('results');
            if (results.classList.contains('hidden')) {
                alert('Calculate score first!');
                return;
            }
            
            try {
                const canvas = await html2canvas(results, { backgroundColor: '#ffffff', scale: 2 });
                canvas.toBlob(blob => {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.download = `sus_score_${new Date().toISOString().slice(0,10)}.png`;
                    link.href = url;
                    link.click();
                    URL.revokeObjectURL(url);
                });
            } catch (error) {
                alert('Export error');
            }
        }

        renderQuestionnaire();

        // Dark mode & font
        let isDarkMode = false, fontSize = 1;
        document.getElementById('darkModeToggle').addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode');
            document.getElementById('modeIcon').textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
        });
        document.getElementById('increaseFont').addEventListener('click', () => {
            if (fontSize < 1.5) { fontSize += 0.1; document.documentElement.style.setProperty('--font-size', fontSize); }
        });
        document.getElementById('decreaseFont').addEventListener('click', () => {
            if (fontSize > 0.7) { fontSize -= 0.1; document.documentElement.style.setProperty('--font-size', fontSize); }
        });
    </script>
</body>
</html>
